pipeline {
	agent any
	environment{
		LatestTag= getLatestBuildNo()
	}
	stages{
		stage('create jar'){
			steps{
				bat 'mvn clean install -DskipTests=true'
			}
		}
		stage('Build Docker Image'){
			steps{
				bat "docker build . -t pankajsharma151290/movie-info-jenkins:${LatestTag}"
			}
		}
	}	
}

def getLatestBuildNo(){
	def tag = sh script: 'git rev-parse HEAD', returnStdout: true
	return tag
}